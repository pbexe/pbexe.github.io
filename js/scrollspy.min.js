!function(e){function l(t,n,a,r){var o=e();return e.each(i,function(e,i){if(i.height()>0){var s=i.offset().top,l=i.offset().left,u=l+i.width(),c=s+i.height(),f=!(l>n||r>u||s>a||t>c);f&&o.push(i)}}),o}function u(){++r;var i=t.scrollTop(),a=t.scrollLeft(),o=a+t.width(),u=i+t.height(),c=l(i+s.top+200,o+s.right,u+s.bottom,a+s.left);e.each(c,function(e,t){var i=t.data("scrollSpy:ticks");"number"!=typeof i&&t.triggerHandler("scrollSpy:enter"),t.data("scrollSpy:ticks",r)}),e.each(n,function(e,t){var i=t.data("scrollSpy:ticks");"number"==typeof i&&i!==r&&(t.triggerHandler("scrollSpy:exit"),t.data("scrollSpy:ticks",null))}),n=c}function c(){t.trigger("scrollSpy:winSize")}function d(e,t,i){var n,a,r,o=null,s=0;i||(i={});var l=function(){s=i.leading===!1?0:f(),o=null,r=e.apply(n,a),n=a=null};return function(){var u=f();s||i.leading!==!1||(s=u);var c=t-(u-s);return n=this,a=arguments,0>=c?(clearTimeout(o),o=null,s=u,r=e.apply(n,a),n=a=null):o||i.trailing===!1||(o=setTimeout(l,c)),r}}var t=e(window),i=[],n=[],a=!1,r=0,s={top:0,right:0,bottom:0,left:0},f=Date.now||function(){return(new Date).getTime()};e.scrollSpy=function(n,r){var o=[];n=e(n),n.each(function(t,n){i.push(e(n)),e(n).data("scrollSpy:id",t),e("a[href=#"+e(n).attr("id")+"]").click(function(t){t.preventDefault();var i=e(this.hash).offset().top+1;e("html, body").animate({scrollTop:i-200},{duration:400,queue:!1,easing:"easeOutCubic"})})}),r=r||{throttle:100},s.top=r.offsetTop||0,s.right=r.offsetRight||0,s.bottom=r.offsetBottom||0,s.left=r.offsetLeft||0;var l=d(u,r.throttle||100),c=function(){e(document).ready(l)};return a||(t.on("scroll",c),t.on("resize",c),a=!0),setTimeout(c,0),n.on("scrollSpy:enter",function(){o=e.grep(o,function(e){return 0!=e.height()});var t=e(this);o[0]?(e("a[href=#"+o[0].attr("id")+"]").removeClass("active"),t.data("scrollSpy:id")<o[0].data("scrollSpy:id")?o.unshift(e(this)):o.push(e(this))):o.push(e(this)),e("a[href=#"+o[0].attr("id")+"]").addClass("active")}),n.on("scrollSpy:exit",function(){if(o=e.grep(o,function(e){return 0!=e.height()}),o[0]){e("a[href=#"+o[0].attr("id")+"]").removeClass("active");var t=e(this);o=e.grep(o,function(e){return e.attr("id")!=t.attr("id")}),o[0]&&e("a[href=#"+o[0].attr("id")+"]").addClass("active")}}),n},e.winSizeSpy=function(i){return e.winSizeSpy=function(){return t},i=i||{throttle:100},t.on("resize",d(c,i.throttle||100))},e.fn.scrollSpy=function(t){return e.scrollSpy(e(this),t)}}(jQuery);